
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://allenge007.github.io/cs/os/chapter2/">
      
      
        <link rel="prev" href="../chapter1/">
      
      
        <link rel="next" href="../chapter3/">
      
      
      <link rel="icon" href="../../../assets/smile.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>进程、线程与 CPU 调度 - allenge 的小站</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-Q64PQRHYP9"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-Q64PQRHYP9",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-Q64PQRHYP9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#cpu" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="allenge 的小站" class="md-header__button md-logo" aria-label="allenge 的小站" data-md-component="logo">
      
  <img src="../../../assets/oh_boy.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            allenge 的小站
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              进程、线程与 CPU 调度
            
          </span>
        </div>
      </div>
    </div>

    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="pink"  aria-label="切换到浅色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换到浅色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="deep-purple"  aria-label="切换到深色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到深色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    

    <div class="md-header__option">
      <div id="font-sizer-controls" style="display: flex; align-items: center;">
        <button id="decrease-font-button" type="button" title="缩小字体" class="md-header__button md-icon" style="border: none; background: none; cursor: pointer;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.12 14 7.5 7.67 9.87 14M6.5 5 1 19h2.25l1.12-3h6.25l1.13 3H14L8.5 5zM18 17l5-5.07-1.41-1.43L19 13.1V7h-2v6.1l-2.59-2.6L13 11.93z"/></svg>
        </button>
        <!-- <button id="reset-font-button" type="button" title="重置字体" class="md-header__button md-icon" style="border: none; background: none; cursor: pointer;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m18.5 4 1.16 4.35-.96.26c-.45-.87-.91-1.74-1.44-2.18C16.73 6 16.11 6 15.5 6H13v10.5c0 .5 0 1 .33 1.25.34.25 1 .25 1.67.25v1H9v-1c.67 0 1.33 0 1.67-.25.33-.25.33-.75.33-1.25V6H8.5c-.61 0-1.23 0-1.76.43-.53.44-.99 1.31-1.44 2.18l-.96-.26L5.5 4z"/></svg>
        </button> -->
        <button id="increase-font-button" type="button" title="放大字体" class="md-header__button md-icon" style="border: none; background: none; cursor: pointer;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5.12 14 7.5 7.67 9.87 14M6.5 5 1 19h2.25l1.12-3h6.25l1.13 3H14L8.5 5zM18 7l-5 5.07 1.41 1.43L17 10.9V17h2v-6.1l2.59 2.6L23 12.07z"/></svg>
        </button>
      </div>
    </div>

    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/allenge007" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    allenge
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  主页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../math/" class="md-tabs__link">
          
  
  
    
  
  数学

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
    
  
  计算机科学

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../project/" class="md-tabs__link">
          
  
  
    
  
  项目

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../blog/" class="md-tabs__link">
          
  
  
    
  
  博客

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/about_me/" class="md-tabs__link">
          
  
  
    
  
  关于

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="allenge 的小站" class="md-nav__button md-logo" aria-label="allenge 的小站" data-md-component="logo">
      
  <img src="../../../assets/oh_boy.png" alt="logo">

    </a>
    allenge 的小站
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/allenge007" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    allenge
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    主页
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    数学
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            数学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../math/signals_and_systems/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    信号与系统
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            信号与系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/signals_and_systems/chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    连续时间傅里叶变换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/signals_and_systems/chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    离散时间傅里叶变换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/signals_and_systems/chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    拉普拉斯变换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/signals_and_systems/chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    z 变换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../math/signals_and_systems/FFT/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    快速傅立叶变换
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    计算机科学
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            计算机科学
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    操作系统
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            操作系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    操作系统概述
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    进程、线程与 CPU 调度
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    进程、线程与 CPU 调度
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#processes" class="md-nav__link">
    <span class="md-ellipsis">
      第四讲 — 进程 (Processes)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第四讲 — 进程 (Processes)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-process-concept" class="md-nav__link">
    <span class="md-ellipsis">
      1. 进程概念 (Process Concept)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 进程概念 (Process Concept)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-vs" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 程序 vs. 进程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 进程的组成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-linux-32-bit-example" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 进程在内存中的布局 (Linux 32-bit Example)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-process-state" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 进程状态 (Process State)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-suspended-process" class="md-nav__link">
    <span class="md-ellipsis">
      1.5 挂起进程 (Suspended Process)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-process-control-block-pcb" class="md-nav__link">
    <span class="md-ellipsis">
      1.6 进程控制块 (Process Control Block - PCB)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-process-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 进程调度 (Process Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-operations-on-processes" class="md-nav__link">
    <span class="md-ellipsis">
      3. 进程操作 (Operations on Processes)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 进程操作 (Operations on Processes)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 进程创建 (Process Creation)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 进程终止 (Process Termination)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-inter-process-communication-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      4. 进程间通信 (Inter-Process Communication - IPC)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 进程间通信 (Inter-Process Communication - IPC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 共享内存系统
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 消息传递系统
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-pipes" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 管道 (Pipes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-sockets" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 套接字 (Sockets)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-remote-procedure-calls-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      4.5 远程过程调用 (Remote Procedure Calls - RPC)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threads" class="md-nav__link">
    <span class="md-ellipsis">
      第五讲 — 线程 (Threads)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第五讲 — 线程 (Threads)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-thread-concept" class="md-nav__link">
    <span class="md-ellipsis">
      1. 线程概念 (Thread Concept)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-benefits-of-multithreading" class="md-nav__link">
    <span class="md-ellipsis">
      2. 多线程的优点 (Benefits of Multithreading)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-multicore-programming" class="md-nav__link">
    <span class="md-ellipsis">
      3. 多核编程 (Multicore Programming)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-user-threads-and-kernel-threads" class="md-nav__link">
    <span class="md-ellipsis">
      4. 用户线程与内核线程 (User Threads and Kernel Threads)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 用户线程与内核线程 (User Threads and Kernel Threads)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mapping-user-threads-to-kernel-threads" class="md-nav__link">
    <span class="md-ellipsis">
      线程模型 (Mapping User Threads to Kernel Threads)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-thread-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      5. 线程库 (Thread Libraries)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-implicit-threading" class="md-nav__link">
    <span class="md-ellipsis">
      6. 隐式线程 (Implicit Threading)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-threading-issues" class="md-nav__link">
    <span class="md-ellipsis">
      7. 多线程问题 (Threading Issues)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      8. 操作系统中的线程示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpu-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      第六讲 — CPU调度 (CPU Scheduling)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第六讲 — CPU调度 (CPU Scheduling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      1. 基本概念 (Basic Concepts)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 基本概念 (Basic Concepts)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      触发调度的事件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      2. 调度准则 (Scheduling Criteria)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      3. 调度算法 (Scheduling Algorithms)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 调度算法 (Scheduling Algorithms)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-first-come-first-served-fcfs" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 先到先服务 (First-Come, First-Served - FCFS)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-shortest-job-first-sjf" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 最短作业优先 (Shortest-Job-First - SJF)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 优先级调度 (Priority Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-round-robin-rr" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 轮转调度 (Round Robin - RR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-multilevel-queue-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 多级队列调度 (Multilevel Queue Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-multilevel-feedback-queue-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.6 多级反馈队列调度 (Multilevel Feedback Queue Scheduling)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      4. 线程调度 (Thread Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-multiprocessor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      5. 多处理器调度 (Multiprocessor Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-cpu-real-time-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      6. 实时CPU调度 (Real-Time CPU Scheduling)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. 实时CPU调度 (Real-Time CPU Scheduling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      实时调度算法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-operating-system-examples" class="md-nav__link">
    <span class="md-ellipsis">
      7. 操作系统示例 (Operating System Examples)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. 操作系统示例 (Operating System Examples)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-linux" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 Linux调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-windows" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 Windows调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-solaris" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 Solaris调度
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-algorithm-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      8. 算法评估 (Algorithm Evaluation)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    进程同步与死锁
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    内存管理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    文件系统
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ai/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    人工智能
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            人工智能
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    知识表示与推理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    搜索技术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chapter3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    不确定性推理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chapter4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    机器学习 - 聚类
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chapter5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    机器学习 - 神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chapter6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    机器学习 - 决策树
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chapter7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    深度学习
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chapter8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    强化学习
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../project/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    项目
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            项目
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../project/DeepseekCLI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DeepSeek CLI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../blog/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    博客
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            博客
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../blog/tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分类
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    归档
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            归档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    六月 2025
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    分类
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            分类
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/%E5%93%81%E9%89%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    品鉴
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../blog/category/%E9%9A%8F%E7%AC%94/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    随笔
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    关于
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            关于
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/about_me/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于我
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#processes" class="md-nav__link">
    <span class="md-ellipsis">
      第四讲 — 进程 (Processes)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第四讲 — 进程 (Processes)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-process-concept" class="md-nav__link">
    <span class="md-ellipsis">
      1. 进程概念 (Process Concept)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 进程概念 (Process Concept)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-vs" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 程序 vs. 进程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 进程的组成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-linux-32-bit-example" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 进程在内存中的布局 (Linux 32-bit Example)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-process-state" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 进程状态 (Process State)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-suspended-process" class="md-nav__link">
    <span class="md-ellipsis">
      1.5 挂起进程 (Suspended Process)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-process-control-block-pcb" class="md-nav__link">
    <span class="md-ellipsis">
      1.6 进程控制块 (Process Control Block - PCB)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-process-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      2. 进程调度 (Process Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-operations-on-processes" class="md-nav__link">
    <span class="md-ellipsis">
      3. 进程操作 (Operations on Processes)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 进程操作 (Operations on Processes)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 进程创建 (Process Creation)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 进程终止 (Process Termination)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-inter-process-communication-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      4. 进程间通信 (Inter-Process Communication - IPC)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 进程间通信 (Inter-Process Communication - IPC)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 共享内存系统
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 消息传递系统
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-pipes" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 管道 (Pipes)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-sockets" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 套接字 (Sockets)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-remote-procedure-calls-rpc" class="md-nav__link">
    <span class="md-ellipsis">
      4.5 远程过程调用 (Remote Procedure Calls - RPC)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#threads" class="md-nav__link">
    <span class="md-ellipsis">
      第五讲 — 线程 (Threads)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第五讲 — 线程 (Threads)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-thread-concept" class="md-nav__link">
    <span class="md-ellipsis">
      1. 线程概念 (Thread Concept)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-benefits-of-multithreading" class="md-nav__link">
    <span class="md-ellipsis">
      2. 多线程的优点 (Benefits of Multithreading)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-multicore-programming" class="md-nav__link">
    <span class="md-ellipsis">
      3. 多核编程 (Multicore Programming)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-user-threads-and-kernel-threads" class="md-nav__link">
    <span class="md-ellipsis">
      4. 用户线程与内核线程 (User Threads and Kernel Threads)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. 用户线程与内核线程 (User Threads and Kernel Threads)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mapping-user-threads-to-kernel-threads" class="md-nav__link">
    <span class="md-ellipsis">
      线程模型 (Mapping User Threads to Kernel Threads)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-thread-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      5. 线程库 (Thread Libraries)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-implicit-threading" class="md-nav__link">
    <span class="md-ellipsis">
      6. 隐式线程 (Implicit Threading)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-threading-issues" class="md-nav__link">
    <span class="md-ellipsis">
      7. 多线程问题 (Threading Issues)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8" class="md-nav__link">
    <span class="md-ellipsis">
      8. 操作系统中的线程示例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cpu-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      第六讲 — CPU调度 (CPU Scheduling)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="第六讲 — CPU调度 (CPU Scheduling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      1. 基本概念 (Basic Concepts)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. 基本概念 (Basic Concepts)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      触发调度的事件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      2. 调度准则 (Scheduling Criteria)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      3. 调度算法 (Scheduling Algorithms)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. 调度算法 (Scheduling Algorithms)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-first-come-first-served-fcfs" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 先到先服务 (First-Come, First-Served - FCFS)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-shortest-job-first-sjf" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 最短作业优先 (Shortest-Job-First - SJF)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 优先级调度 (Priority Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-round-robin-rr" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 轮转调度 (Round Robin - RR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35-multilevel-queue-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 多级队列调度 (Multilevel Queue Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-multilevel-feedback-queue-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.6 多级反馈队列调度 (Multilevel Feedback Queue Scheduling)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      4. 线程调度 (Thread Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-multiprocessor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      5. 多处理器调度 (Multiprocessor Scheduling)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-cpu-real-time-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      6. 实时CPU调度 (Real-Time CPU Scheduling)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. 实时CPU调度 (Real-Time CPU Scheduling)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      实时调度算法
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-operating-system-examples" class="md-nav__link">
    <span class="md-ellipsis">
      7. 操作系统示例 (Operating System Examples)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. 操作系统示例 (Operating System Examples)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-linux" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 Linux调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-windows" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 Windows调度
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-solaris" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 Solaris调度
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#8-algorithm-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      8. 算法评估 (Algorithm Evaluation)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/allenge007/edit/main/docs/cs/os/chapter2.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/allenge007/raw/main/docs/cs/os/chapter2.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="cpu">进程、线程与 CPU 调度</h1>
<div class="admonition abstract">
<p class="admonition-title">课程概述</p>
<p>本系列笔记总结了操作系统中关于进程、线程和CPU调度的核心概念。内容涵盖：</p>
<ul>
<li><strong>进程管理 (Chapter 4):</strong> 进程概念、状态、控制块、创建与终止、进程间通信 (IPC) 机制如共享内存、消息传递、管道等。</li>
<li><strong>线程管理 (Chapter 5):</strong> 线程概念、与进程的区别、用户级与内核级线程、多线程模型、线程库 (Pthreads, Windows, Java)、多线程编程问题与解决方案。</li>
<li><strong>CPU调度 (Chapter 6):</strong> 调度基本概念、调度准则、各种调度算法 (FCFS, SJF, RR, 优先级, 多级队列)、多处理器调度、实时调度及主流操作系统的调度策略。</li>
</ul>
</div>
<hr />
<h2 id="processes">第四讲 — 进程 (Processes)</h2>
<div class="admonition note">
<p class="admonition-title">学习目标</p>
<ul>
<li>理解进程的组成部分及其在操作系统中的表示和调度。</li>
<li>掌握进程的创建与终止，包括相关系统调用的使用。</li>
<li>对比共享内存和消息传递这两种进程间通信方式。</li>
<li>了解管道和POSIX共享内存进行进程间通信的编程。</li>
<li>熟悉使用套接字和远程过程调用 (RPC) 的客户机-服务器通信。</li>
</ul>
</div>
<h3 id="1-process-concept">1. 进程概念 (Process Concept)</h3>
<h4 id="11-vs">1.1 程序 vs. 进程</h4>
<ul>
<li><strong>程序 (Program):</strong> 存储在磁盘上的被动实体，是一个可执行文件，包含一系列指令。</li>
<li><strong>进程 (Process):</strong> 正在执行的程序实例，是一个活动实体。当可执行文件加载到内存中时，程序就成为进程。<ul>
<li>一个程序可以对应多个进程（例如，多个用户同时运行同一个程序）。</li>
</ul>
</li>
</ul>
<h4 id="12">1.2 进程的组成</h4>
<p>一个进程通常包含多个部分：</p>
<ol>
<li><strong>文本段 (Text Segment):</strong> 程序代码。</li>
<li><strong>程序计数器 (Program Counter):</strong> 指向下一条要执行的指令。</li>
<li><strong>处理器寄存器 (Processor Registers):</strong> 当前活动的寄存器值。</li>
<li><strong>堆栈 (Stack):</strong> 包含临时数据，如函数参数、返回地址、局部变量。</li>
<li><strong>数据段 (Data Segment):</strong> 包含全局变量。</li>
<li><strong>堆 (Heap):</strong> 包含运行时动态分配的内存。</li>
</ol>
<h4 id="13-linux-32-bit-example">1.3 进程在内存中的布局 (Linux 32-bit Example)</h4>
<div class="highlight"><pre><span></span><code>      0xFFFFFFFF  +-------------------+
                  |      Kernel       | Kernel Space (1G)
      0xC0000000  +-------------------+
                  |       Stack       | (向低地址增长) 函数信息, 局部动态变量, 局部常量
                  |        ...        |
                  |       mmap        | Memory mapping (文件映射, 共享库等)
                  |        ...        |
                  |       Heap        | (向高地址增长) 动态分配的变量
                  |        .bss       | 未初始化的全局/静态变量
                  |        .data      | 已初始化的全局/静态变量
      0x08048000  |        .text      | 程序代码, 全局常量, 字符串字面量
                  +-------------------+
      0x00000000  | Reserved by OS    | User Space (3G)
</code></pre></div>
<ul>
<li><code>.text</code>: 代码段</li>
<li><code>.data</code>: 初始化数据段</li>
<li><code>.bss</code>: 未初始化数据段 (Block Started by Symbol)</li>
<li><code>heap</code>: 动态内存分配区域</li>
<li><code>mmap</code>: 内存映射区 (Memory Mapped Region)</li>
<li><code>stack</code>: 栈区</li>
<li><code>Kernel space</code>: 内核空间，用户进程不可直接访问。</li>
</ul>
<h4 id="14-process-state">1.4 进程状态 (Process State)</h4>
<p>进程在执行时会改变状态：</p>
<ol>
<li><strong>新建 (New):</strong> 进程正在被创建。</li>
<li><strong>运行 (Running):</strong> 指令正在被执行。</li>
<li><strong>等待 (Waiting/Blocked):</strong> 进程正在等待某个事件发生（如I/O完成或收到信号）。</li>
<li><strong>就绪 (Ready):</strong> 进程等待被分配给处理器执行。</li>
<li><strong>终止 (Terminated):</strong> 进程已完成执行。</li>
</ol>
<div class="admonition tip">
<p class="admonition-title">5状态进程模型</p>
<p><img alt="5 State Process Model" src="../fig/process1.png" /></p>
<ul>
<li>新建 -&gt; 就绪</li>
<li>就绪 -&gt; 运行 (调度器分派)</li>
<li>运行 -&gt; 等待 (I/O或事件等待)</li>
<li>运行 -&gt; 就绪 (中断或时间片用完)</li>
<li>等待 -&gt; 就绪 (I/O或事件完成)</li>
<li>运行 -&gt; 终止</li>
</ul>
</div>
<h4 id="15-suspended-process">1.5 挂起进程 (Suspended Process)</h4>
<ul>
<li><strong>交换 (Swap):</strong> 将内存中的一个进程的一部分或全部移到磁盘上，以释放内存。</li>
<li>当内存中没有就绪进程时，OS可能将阻塞进程交换到磁盘，进入挂起队列。</li>
<li><strong>特征:</strong> 不能立即执行；可能等待事件，也可能没等；除非显式命令，否则无法从挂起状态转移。</li>
<li><strong>原因:</strong> 系统需要、父进程请求、用户请求、定时等。</li>
</ul>
<h4 id="16-process-control-block-pcb">1.6 进程控制块 (Process Control Block - PCB)</h4>
<p>PCB (也称任务控制块 Task Control Block, TCB) 是操作系统中用于管理进程的数据结构，包含了一个特定进程的所有信息。</p>
<ul>
<li><strong>进程状态:</strong> 运行、等待等。</li>
<li><strong>程序计数器:</strong> 下一条要执行指令的地址。</li>
<li><strong>CPU寄存器:</strong> 各种寄存器的内容。</li>
<li><strong>CPU调度信息:</strong> 进程优先级、调度队列指针等。</li>
<li><strong>内存管理信息:</strong> 基址寄存器、页表等。</li>
<li><strong>记账信息:</strong> CPU使用时间、时间限制等。</li>
<li><strong>I/O状态信息:</strong> 分配给进程的I/O设备、打开文件列表等。</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">PCB的重要性与保护</p>
<p>PCB是操作系统最重要的的数据结构之一。它的损坏可能导致系统无法管理对应进程。对PCB的访问需要保护机制。</p>
</div>
<ul>
<li><strong>Linux中的PCB:</strong> <code>task_struct</code> (位于 <code>include/linux/sched.h</code>)<ul>
<li><code>pid_t pid;</code> (进程标识符)</li>
<li><code>struct task_struct *parent;</code> (父进程)</li>
<li><code>struct list_head children;</code> (子进程列表)</li>
<li><code>struct files_struct *files;</code> (打开文件列表)</li>
<li><code>struct mm_struct *mm;</code> (进程地址空间)</li>
</ul>
</li>
</ul>
<h3 id="2-process-scheduling">2. 进程调度 (Process Scheduling)</h3>
<ul>
<li><strong>调度器 (Scheduler):</strong> 从就绪进程中选择一个在CPU上执行。</li>
<li><strong>目标:</strong> 最大化CPU利用率，快速切换进程。</li>
<li><strong>调度队列 (Scheduling Queues):</strong><ul>
<li><strong>就绪队列 (Ready Queue):</strong> 内存中所有就绪等待执行的进程。</li>
<li><strong>等待队列 (Wait Queue):</strong> 等待某事件（如I/O）的进程集合。</li>
</ul>
</li>
<li><strong>上下文切换 (Context Switch):</strong> 当CPU从一个进程切换到另一个进程时，系统需要保存当前进程的上下文（PCB中的信息）并加载下一个进程的上下文。这是一个纯开销操作。<ul>
<li><strong>触发:</strong> 中断、陷阱 (系统调用或错误)。</li>
</ul>
</li>
</ul>
<h3 id="3-operations-on-processes">3. 进程操作 (Operations on Processes)</h3>
<h4 id="31-process-creation">3.1 进程创建 (Process Creation)</h4>
<ul>
<li>父进程创建子进程，形成进程树。</li>
<li><strong>资源共享选项:</strong><ol>
<li>父子进程共享所有资源。</li>
<li>子进程共享父进程资源的一个子集。</li>
<li>父子进程不共享资源。</li>
</ol>
</li>
<li><strong>执行选项:</strong><ol>
<li>父子进程并发执行。</li>
<li>父进程等待子进程终止。</li>
</ol>
</li>
<li>
<p><strong>地址空间选项:</strong></p>
<ol>
<li>子进程是父进程的副本（共享代码，数据写时复制）。</li>
<li>子进程加载一个新程序。</li>
</ol>
</li>
<li>
<p><strong>UNIX/Linux中的进程创建:</strong></p>
<ul>
<li><code>fork()</code>: 创建一个新进程，子进程是父进程的副本。<ul>
<li><code>fork()</code> 对父进程返回子进程的PID，对子进程返回0。失败返回-1。</li>
</ul>
</li>
<li><code>exec()</code> 系列函数: (<code>execlp</code>, <code>execvp</code>等) 在一个进程的上下文中加载并运行一个新的程序。它会替换当前进程的内存空间（代码、数据、堆栈等）。</li>
<li><code>wait()</code>: 父进程调用以等待子进程终止，并获取子进程的退出状态。</li>
<li><code>vfork()</code>: 创建子进程并阻塞父进程，直到子进程调用 <code>exec()</code> 或 <code>exit()</code>。子进程在父进程的地址空间中运行（不推荐使用，易出错）。</li>
</ul>
</li>
</ul>
<div class="admonition example">
<p class="admonition-title">fork() + exec() 模式</p>
<div class="highlight"><pre><span></span><code><span class="kt">pid_t</span><span class="w"> </span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fork</span><span class="p">();</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pid</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* error */</span><span class="w"> </span><span class="p">}</span>
<span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">pid</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* child process */</span>
<span class="w">    </span><span class="n">execlp</span><span class="p">(</span><span class="s">&quot;/bin/ls&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ls&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* parent process */</span>
<span class="w">    </span><span class="n">wait</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Child Complete</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</div>
<h4 id="32-process-termination">3.2 进程终止 (Process Termination)</h4>
<ul>
<li>进程执行完最后一条语句后，调用 <code>exit()</code> 系统调用请求操作系统删除它。<ul>
<li><code>exit()</code> 会释放进程资源，并将退出状态返回给父进程（如果父进程调用了 <code>wait()</code>）。</li>
</ul>
</li>
<li>父进程可以通过 <code>abort()</code> (或发送信号) 终止子进程。原因：<ul>
<li>子进程超出资源分配。</li>
<li>分配给子进程的任务不再需要。</li>
<li>父进程正在退出，且OS不允许子进程继续 (级联终止)。</li>
</ul>
</li>
<li><strong>僵尸进程 (Zombie Process):</strong> 子进程已终止，但其父进程尚未调用 <code>wait()</code> 来获取其状态。PCB仍然保留。</li>
<li><strong>孤儿进程 (Orphan Process):</strong> 父进程在子进程之前终止。孤儿进程通常会被 <code>init</code> 进程 (PID 1) 收养，<code>init</code> 进程会定期调用 <code>wait()</code> 清理它们。</li>
</ul>
<h3 id="4-inter-process-communication-ipc">4. 进程间通信 (Inter-Process Communication - IPC)</h3>
<p>协作进程需要IPC机制来交换数据和信息。
两种基本模型：</p>
<ol>
<li><strong>共享内存 (Shared Memory):</strong><ul>
<li>进程间共享一块内存区域。</li>
<li>通信由用户进程控制，OS只负责建立共享内存区域。</li>
<li>优点：速度快（数据不需要在内核和用户空间之间复制）。</li>
<li>缺点：需要同步机制来控制对共享内存的访问（如信号量、互斥锁）。</li>
</ul>
</li>
<li><strong>消息传递 (Message Passing):</strong><ul>
<li>进程通过交换消息进行通信，无需共享变量。</li>
<li>OS提供 <code>send(message)</code> 和 <code>receive(message)</code> 操作。</li>
<li>优点：易于实现，无需担心同步问题（由OS处理）。</li>
<li>缺点：速度通常比共享内存慢（涉及系统调用和数据复制）。</li>
</ul>
</li>
</ol>
<h4 id="41">4.1 共享内存系统</h4>
<ul>
<li>
<p><strong>生产者-消费者问题 (Producer-Consumer Problem):</strong></p>
<ul>
<li>生产者进程产生数据，消费者进程消费数据。</li>
<li>需要一个共享缓冲区。</li>
<li><strong>无界缓冲区 (Unbounded-buffer):</strong> 缓冲区大小无限制。</li>
<li><strong>有界缓冲区 (Bounded-buffer):</strong> 缓冲区大小固定。<ul>
<li>使用循环数组和 <code>in</code>, <code>out</code> 指针。</li>
<li><code>in</code>: 指向下一个空位。</li>
<li><code>out</code>: 指向第一个满位。</li>
<li>缓冲区空: <code>in == out</code></li>
<li>缓冲区满: <code>(in + 1) % BUFFER_SIZE == out</code></li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Linux System V 共享内存:</strong></p>
<ul>
<li><code>key_t ftok(const char *pathname, int proj_id)</code>: 生成一个IPC key。</li>
<li><code>int shmget(key_t key, size_t size, int shmflg)</code>: 创建或获取一个共享内存段，返回共享内存标识符 <code>shmid</code>。<ul>
<li><code>shmflg</code>: <code>IPC_CREAT</code> (创建), <code>IPC_EXCL</code> (与<code>IPC_CREAT</code>合用，确保创建新的), 权限位。</li>
</ul>
</li>
<li><code>void *shmat(int shmid, const void *shmaddr, int shmflg)</code>: 将共享内存段附加到当前进程的地址空间，返回指向共享内存的指针。<ul>
<li><code>shmaddr = 0</code>: 由内核决定附加地址。</li>
</ul>
</li>
<li><code>int shmdt(const void *shmaddr)</code>: 分离共享内存段。</li>
<li><code>int shmctl(int shmid, int cmd, struct shmid_ds *buf)</code>: 控制共享内存。<ul>
<li><code>cmd = IPC_RMID</code>: 删除共享内存段。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>POSIX 共享内存:</strong></p>
<ul>
<li>使用内存映射文件 (memory-mapped files)。</li>
<li><code>int shm_open(const char *name, int oflag, mode_t mode)</code>: 创建或打开一个POSIX共享内存对象，返回文件描述符。<code>name</code> 通常是 <code>/somename</code> 形式。</li>
<li><code>int ftruncate(int fd, off_t length)</code>: 设置共享内存对象的大小。</li>
<li><code>void *mmap(void *addr, size_t length, int prot, int flags, int fd, off_t offset)</code>: 将共享内存对象映射到进程的地址空间。</li>
<li><code>int shm_unlink(const char *name)</code>: 删除POSIX共享内存对象。</li>
<li>编译时链接 <code>rt</code> 库: <code>gcc -lrt your_program.c</code></li>
</ul>
</li>
</ul>
<h4 id="42">4.2 消息传递系统</h4>
<ul>
<li>
<p><strong>通信链路 (Communication Link):</strong></p>
<ul>
<li><strong>直接通信 (Direct Communication):</strong> 进程必须显式命名对方。<ul>
<li><code>send(P, message)</code></li>
<li><code>receive(Q, message)</code></li>
<li>链路自动建立，通常一对一，双向。</li>
</ul>
</li>
<li><strong>间接通信 (Indirect Communication):</strong> 通过邮箱 (mailboxes) 或端口 (ports) 发送和接收消息。<ul>
<li>每个邮箱有唯一ID。进程共享邮箱才能通信。</li>
<li><code>send(A, message)</code> (发送到邮箱A)</li>
<li><code>receive(A, message)</code> (从邮箱A接收)</li>
<li>允许多对多通信。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>同步 (Synchronization):</strong></p>
<ul>
<li><strong>阻塞发送 (Blocking send):</strong> 发送方等待，直到消息被接收方或邮箱接收。</li>
<li><strong>阻塞接收 (Blocking receive):</strong> 接收方等待，直到有消息可用。</li>
<li><strong>非阻塞发送 (Non-blocking send):</strong> 发送方发送消息并继续执行。</li>
<li><strong>非阻塞接收 (Non-blocking receive):</strong> 接收方接收有效消息或空消息（或状态）。</li>
<li><strong>会合 (Rendezvous):</strong> 发送和接收都阻塞。</li>
</ul>
</li>
<li>
<p><strong>缓冲 (Buffering):</strong></p>
<ul>
<li><strong>零容量 (Zero capacity):</strong> 发送方必须等待接收方 (无缓冲，会合)。</li>
<li><strong>有限容量 (Bounded capacity):</strong> 队列满时发送方必须等待。</li>
<li><strong>无限容量 (Unbounded capacity):</strong> 发送方从不等待。</li>
</ul>
</li>
<li>
<p><strong>Linux System V 消息队列:</strong></p>
<ul>
<li><code>key_t ftok(...)</code></li>
<li><code>int msgget(key_t key, int msgflg)</code>: 创建或获取消息队列，返回 <code>msqid</code>。</li>
<li><code>int msgsnd(int msqid, const void *msgp, size_t msgsz, int msgflg)</code>: 发送消息。<ul>
<li><code>msgp</code>: 指向 <code>struct msgbuf { long mtype; char mtext[...]; }</code>。</li>
<li><code>msgsz</code>: <code>mtext</code> 的大小。</li>
<li><code>msgflg</code>: <code>IPC_NOWAIT</code> (非阻塞)。</li>
</ul>
</li>
<li><code>ssize_t msgrcv(int msqid, void *msgp, size_t msgsz, long msgtyp, int msgflg)</code>: 接收消息。<ul>
<li><code>msgtyp</code>: <code>=0</code> (队列中第一个消息), <code>&gt;0</code> (第一个类型为 <code>msgtyp</code> 的消息), <code>&lt;0</code> (类型小于等于 <code>|msgtyp|</code> 的最小类型消息)。</li>
</ul>
</li>
<li><code>int msgctl(int msqid, int cmd, struct msqid_ds *buf)</code>: 控制消息队列。<ul>
<li><code>cmd = IPC_RMID</code>: 删除。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>POSIX 消息队列:</strong></p>
<ul>
<li><code>mqd_t mq_open(const char *name, int oflag, mode_t mode, struct mq_attr *attr)</code>: 创建或打开消息队列。<code>name</code> 通常是 <code>/mqname</code>。</li>
<li><code>int mq_close(mqd_t mqdes)</code>: 关闭。</li>
<li><code>int mq_unlink(const char *name)</code>: 删除。</li>
<li><code>int mq_send(mqd_t mqdes, const char *msg_ptr, size_t msg_len, unsigned int msg_prio)</code>: 发送。</li>
<li><code>ssize_t mq_receive(mqd_t mqdes, char *msg_ptr, size_t msg_len, unsigned int *msg_prio)</code>: 接收。</li>
<li>编译时链接 <code>rt</code> 库: <code>gcc -lrt your_program.c</code></li>
</ul>
</li>
</ul>
<h4 id="43-pipes">4.3 管道 (Pipes)</h4>
<ul>
<li>允许两个进程通信的通道。</li>
<li><strong>普通管道 (Ordinary/Unnamed Pipes):</strong><ul>
<li>单向通信 (一端写，一端读)。</li>
<li>通常要求父子关系 (父进程创建管道，然后 <code>fork</code>，子进程继承文件描述符)。</li>
<li><code>int pipe(int pipefd[2])</code>: <code>pipefd[0]</code> 是读端, <code>pipefd[1]</code> 是写端。</li>
<li>在Windows中称为匿名管道。</li>
</ul>
</li>
<li><strong>命名管道 (Named Pipes / FIFOs):</strong><ul>
<li>比普通管道更强大。</li>
<li>通信可以是双向的 (但通常一个方向一个FIFO)。</li>
<li>不需要父子关系，任何知道FIFO名称的进程都可以使用。</li>
<li>在文件系统中有一个路径名。</li>
<li><code>mkfifo(const char *pathname, mode_t mode)</code>: 创建FIFO。</li>
<li>使用 <code>open()</code>, <code>read()</code>, <code>write()</code>, <code>close()</code> 进行操作。</li>
</ul>
</li>
</ul>
<h4 id="44-sockets">4.4 套接字 (Sockets)</h4>
<ul>
<li>通信的端点。</li>
<li>通过 <code>(IP地址:端口号)</code> 标识。例如 <code>192.168.1.100:8080</code>。</li>
<li>允许不同机器上的进程通信。</li>
<li>类型：<ul>
<li><strong>面向连接 (TCP - Transmission Control Protocol):</strong>可靠的、基于字节流的通信。</li>
<li><strong>无连接 (UDP - User Datagram Protocol):</strong> 不可靠的、基于数据报的通信。</li>
</ul>
</li>
</ul>
<h4 id="45-remote-procedure-calls-rpc">4.5 远程过程调用 (Remote Procedure Calls - RPC)</h4>
<ul>
<li>允许进程调用另一台机器上（或同一机器上另一地址空间中）的过程（函数/方法），就像调用本地过程一样。</li>
<li>客户端的 <strong>存根 (Stub)</strong> 负责打包参数 (编组/marshalling) 并发送给服务器。</li>
<li>服务器端的存根负责解包参数 (解组/unmarshalling)，调用实际过程，并将结果返回。</li>
<li><strong>接口定义语言 (IDL - Interface Definition Language):</strong> 用于定义RPC接口。</li>
<li><strong>数据表示:</strong> 需要处理不同机器架构的数据格式问题 (如大端/小端)，例如使用外部数据表示 (XDR)。</li>
<li>现代例子：gRPC (使用 Protocol Buffers 作为IDL和序列化格式)。</li>
</ul>
<hr />
<h2 id="threads">第五讲 — 线程 (Threads)</h2>
<div class="admonition note">
<p class="admonition-title">学习目标</p>
<ul>
<li>理解线程概念，以及进程与线程的区别。</li>
<li>了解线程的基本设计与实现。</li>
<li>掌握用户级和内核级线程的差异及线程模型。</li>
<li>熟悉Pthreads、Windows和Java线程库API。</li>
<li>了解隐式线程的概念。</li>
<li>讨论多线程编程中遇到的问题。</li>
<li>了解Windows、Linux等操作系统中的线程管理功能。</li>
</ul>
</div>
<h3 id="1-thread-concept">1. 线程概念 (Thread Concept)</h3>
<ul>
<li><strong>线程 (Thread):</strong> CPU调度的基本单元。是进程内的一个执行路径/控制流。</li>
<li>一个进程可以包含多个线程，它们共享进程的资源。</li>
<li><strong>线程的组成 (线程私有):</strong><ol>
<li>线程ID</li>
<li>程序计数器 (PC)</li>
<li>寄存器集合</li>
<li>堆栈 (Stack)</li>
</ol>
</li>
<li><strong>线程共享的资源 (属于进程):</strong><ol>
<li>代码段 (Text Segment)</li>
<li>数据段 (Data Segment)</li>
<li>堆 (Heap)</li>
<li>打开的文件</li>
<li>信号</li>
</ol>
</li>
</ul>
<div class="admonition summary">
<p class="admonition-title">进程 vs. 线程</p>
<ul>
<li><strong>资源所有权:</strong> 进程是资源分配的基本单位。线程是CPU调度的基本单位，它共享其所属进程的资源。</li>
<li><strong>开销:</strong> 创建/撤销线程比创建/撤销进程开销小得多。线程切换比进程上下文切换开销小。</li>
<li><strong>并发性:</strong> 线程使得在单个进程内实现并发成为可能。</li>
</ul>
</div>
<h3 id="2-benefits-of-multithreading">2. 多线程的优点 (Benefits of Multithreading)</h3>
<ol>
<li><strong>响应性 (Responsiveness):</strong> 即使进程的一部分被阻塞（如等待I/O），其他线程仍可继续执行，提高应用对用户的响应速度。</li>
<li><strong>资源共享 (Resource Sharing):</strong> 线程默认共享内存和资源，方便数据交换。</li>
<li><strong>经济性 (Economy):</strong> 创建和切换线程比进程开销小。</li>
<li><strong>可伸缩性 (Scalability):</strong> 多线程程序可以更好地利用多核处理器架构，实现并行执行。</li>
</ol>
<h3 id="3-multicore-programming">3. 多核编程 (Multicore Programming)</h3>
<ul>
<li><strong>并发 (Concurrency):</strong> 系统支持多个任务同时进行（逻辑上）。在单核上通过快速切换实现。</li>
<li><strong>并行 (Parallelism):</strong> 系统能够同时执行多个任务（物理上）。需要多核。</li>
<li>
<p><strong>Amdahl定律:</strong> 描述了在具有串行和并行组件的程序中，通过增加处理器核心获得的加速比。</p>
<p><span class="arithmatex">\(Speedup \le \frac{1}{S + \frac{1-S}{N}}\)</span></p>
<p>其中 <span class="arithmatex">\(S\)</span> 是程序中串行部分的比例，<span class="arithmatex">\(N\)</span> 是处理器核心数。</p>
</li>
<li>
<p><strong>并行类型:</strong></p>
<ul>
<li><strong>数据并行 (Data Parallelism):</strong> 将相同数据的子集分配到多个核心上，每个核心执行相同的操作。</li>
<li><strong>任务并行 (Task Parallelism):</strong> 将不同的任务（线程）分配到多个核心上，每个线程执行不同的操作。</li>
</ul>
</li>
</ul>
<h3 id="4-user-threads-and-kernel-threads">4. 用户线程与内核线程 (User Threads and Kernel Threads)</h3>
<ul>
<li><strong>用户线程 (User Threads):</strong><ul>
<li>由用户级线程库管理，内核对它们无感知。</li>
<li>创建和管理快速，不需内核干预。</li>
<li>如果一个用户线程阻塞（如进行系统调用），整个进程都会阻塞。</li>
<li>不能真正利用多核处理器。</li>
</ul>
</li>
<li><strong>内核线程 (Kernel Threads):</strong><ul>
<li>由操作系统内核直接支持和管理。</li>
<li>创建和管理相对较慢，需要内核模式切换。</li>
<li>一个内核线程阻塞，不影响同进程的其他内核线程。</li>
<li>可以真正利用多核处理器。</li>
</ul>
</li>
</ul>
<h4 id="mapping-user-threads-to-kernel-threads">线程模型 (Mapping User Threads to Kernel Threads)</h4>
<ol>
<li><strong>多对一模型 (Many-to-One):</strong><ul>
<li>多个用户线程映射到一个内核线程。</li>
<li>线程管理在用户空间，高效。</li>
<li>缺点：一个线程阻塞导致整个进程阻塞；无法利用多核。</li>
<li>例子：早期的Green Threads (Solaris)。</li>
</ul>
</li>
<li><strong>一对一模型 (One-to-One):</strong><ul>
<li>每个用户线程映射到一个内核线程。</li>
<li>提供更多并发性，能利用多核。</li>
<li>缺点：创建用户线程需要创建相应内核线程，开销较大。</li>
<li>例子：Linux, Windows。</li>
</ul>
</li>
<li><strong>多对多模型 (Many-to-Many):</strong><ul>
<li>m个用户线程映射到n个内核线程 (<span class="arithmatex">\(m \ge n\)</span>)。</li>
<li>兼具前两者优点：允许开发者创建任意多用户线程，相应内核线程可在多处理器上并行执行；一个线程阻塞不会阻塞整个进程。</li>
<li>实现复杂。</li>
<li>有时也包含<strong>二级模型 (Two-level Model)</strong>，允许用户线程绑定到特定内核线程。</li>
</ul>
</li>
</ol>
<h3 id="5-thread-libraries">5. 线程库 (Thread Libraries)</h3>
<p>提供创建和管理线程的API。</p>
<ol>
<li><strong>Pthreads (POSIX Threads):</strong><ul>
<li>POSIX标准 (IEEE 1003.1c) 的API规范，非具体实现。</li>
<li>可在用户级或内核级实现。</li>
<li>常见于UNIX类系统 (Linux, macOS)。</li>
<li>主要函数：<ul>
<li><code>pthread_create()</code>: 创建线程。</li>
<li><code>pthread_join()</code>: 等待一个线程终止。</li>
<li><code>pthread_exit()</code>: 线程自我终止。</li>
<li><code>pthread_attr_init()</code>, <code>pthread_attr_destroy()</code>: 线程属性。</li>
</ul>
</li>
</ul>
</li>
<li><strong>Windows Threads:</strong><ul>
<li>内核级线程库，一对一模型。</li>
<li>主要函数：<ul>
<li><code>CreateThread()</code>: 创建线程。</li>
<li><code>WaitForSingleObject()</code> / <code>WaitForMultipleObjects()</code>: 等待线程。</li>
<li><code>ExitThread()</code>: 线程终止。</li>
</ul>
</li>
</ul>
</li>
<li><strong>Java Threads:</strong><ul>
<li>Java线程API通常在JVM层面实现，JVM再利用底层OS的线程库 (Pthreads或Windows Threads)。</li>
<li>创建方式：<ol>
<li>继承 <code>Thread</code> 类并重写 <code>run()</code> 方法。</li>
<li>实现 <code>Runnable</code> 接口 (更常用)，并将其对象传递给 <code>Thread</code> 构造函数。</li>
</ol>
</li>
<li><code>Thread.start()</code>: 启动线程 (调用 <code>run()</code> 方法)。</li>
<li><code>Thread.join()</code>: 等待线程结束。</li>
<li>Java Executor框架 (e.g., <code>ThreadPoolExecutor</code>) 提供了更高级的线程管理。</li>
</ul>
</li>
</ol>
<h3 id="6-implicit-threading">6. 隐式线程 (Implicit Threading)</h3>
<p>由编译器和运行时库而非程序员来创建和管理线程，以简化并行编程。</p>
<ol>
<li><strong>线程池 (Thread Pools):</strong><ul>
<li>预先创建一组线程，等待分配任务。</li>
<li>优点：减少线程创建销毁开销；限制并发线程数。</li>
</ul>
</li>
<li><strong>Fork-Join:</strong><ul>
<li>父线程创建一个或多个子任务（fork），然后等待它们完成（join）。</li>
<li>适用于可递归分解的任务。</li>
</ul>
</li>
<li><strong>OpenMP (Open Multi-Processing):</strong><ul>
<li>一套指导编译器在共享内存环境中进行并行编程的API和指令。</li>
<li>通过 <code>#pragma omp parallel</code> 等指令标识并行区域。</li>
</ul>
</li>
<li><strong>GCD (Grand Central Dispatch):</strong><ul>
<li>Apple为macOS和iOS提供的技术。</li>
<li>将任务（blocks）提交到调度队列（串行或并发），由GCD管理线程池执行。</li>
</ul>
</li>
<li><strong>Intel TBB (Threading Building Blocks):</strong><ul>
<li>C++模板库，用于编写并行程序。</li>
</ul>
</li>
</ol>
<h3 id="7-threading-issues">7. 多线程问题 (Threading Issues)</h3>
<ol>
<li><strong><code>fork()</code> 和 <code>exec()</code> 系统调用的语义:</strong><ul>
<li>当多线程进程中的一个线程调用 <code>fork()</code> 时：<ul>
<li>是只复制调用 <code>fork()</code> 的线程，还是复制所有线程？(UNIX通常只复制调用线程)</li>
</ul>
</li>
<li><code>exec()</code> 通常会替换整个进程（包括所有线程）。</li>
</ul>
</li>
<li><strong>信号处理 (Signal Handling):</strong><ul>
<li>当一个信号发送给多线程进程时，应由哪个线程处理？<ol>
<li>传递给信号适用的线程。</li>
<li>传递给进程中的每个线程。</li>
<li>传递给进程中的某些特定线程。</li>
<li>指定一个特定线程接收进程的所有信号。</li>
</ol>
</li>
</ul>
</li>
<li><strong>线程取消 (Thread Cancellation):</strong><ul>
<li>终止目标线程。</li>
<li><strong>异步取消 (Asynchronous cancellation):</strong> 立即终止目标线程。可能导致资源未释放。</li>
<li><strong>延迟取消 (Deferred cancellation):</strong> 目标线程周期性检查是否应被取消。允许线程在安全点退出，并执行清理操作。 (Pthreads默认)<ul>
<li><code>pthread_cancel()</code>, <code>pthread_setcancelstate()</code>, <code>pthread_setcanceltype()</code>, <code>pthread_testcancel()</code>.</li>
</ul>
</li>
</ul>
</li>
<li><strong>线程本地存储 (Thread-Local Storage - TLS):</strong><ul>
<li>允许每个线程拥有自己的数据副本。当使用线程池等无法控制线程创建过程时有用。</li>
</ul>
</li>
<li><strong>调度程序激活 (Scheduler Activations):</strong><ul>
<li>用于多对多或二级模型，内核通过 "upcall" 机制通知用户级线程库内核线程数量的变化，以便库调整用户线程到内核线程的映射。涉及轻量级进程 (LWP)。</li>
</ul>
</li>
</ol>
<h3 id="8">8. 操作系统中的线程示例</h3>
<ul>
<li><strong>Windows Threads:</strong><ul>
<li>一对一模型。</li>
<li>主要数据结构：<ul>
<li><code>ETHREAD</code> (Executive Thread Block): 内核空间，指向KTHREAD和所属进程。</li>
<li><code>KTHREAD</code> (Kernel Thread Block): 内核空间，调度和同步信息，内核栈，指向TEB。</li>
<li><code>TEB</code> (Thread Environment Block): 用户空间，线程ID，用户模式栈，TLS。</li>
</ul>
</li>
</ul>
</li>
<li><strong>Linux Threads:</strong><ul>
<li>Linux不严格区分进程和线程，都称为任务 (task)。</li>
<li>线程创建通过 <code>clone()</code> 系统调用，允许子任务共享父任务的地址空间。</li>
<li><code>task_struct</code> 数据结构用于表示任务。</li>
</ul>
</li>
</ul>
<hr />
<h2 id="cpu-cpu-scheduling">第六讲 — CPU调度 (CPU Scheduling)</h2>
<div class="admonition note">
<p class="admonition-title">学习目标</p>
<ul>
<li>理解长程、中程、短程调度的概念和区别。</li>
<li>描述各种CPU调度算法。</li>
<li>根据调度标准评估CPU调度算法。</li>
<li>解释与多处理器和多核调度相关的问题。</li>
<li>描述各种实时调度算法。</li>
<li>了解Windows、Linux和Solaris操作系统中使用的调度算法。</li>
<li>应用建模和仿真评估CPU调度算法。</li>
</ul>
</div>
<h3 id="1-basic-concepts">1. 基本概念 (Basic Concepts)</h3>
<ul>
<li><strong>多道程序设计 (Multiprogramming):</strong> 通过在内存中同时保留多个进程，使CPU总有任务执行，从而提高CPU利用率。</li>
<li><strong>CPU-I/O执行周期 (CPU–I/O Burst Cycle):</strong> 进程执行由CPU执行和I/O等待交替构成。</li>
<li><strong>调度层次:</strong><ol>
<li><strong>长程调度 (Long-term scheduler / Job scheduler):</strong> 决定哪些程序从作业池调入内存成为进程，控制系统的并发度。执行频率低。</li>
<li><strong>中程调度 (Medium-term scheduler):</strong> 涉及进程的换入换出 (swapping)，管理系统并发度。</li>
<li><strong>短程调度 (Short-term scheduler / CPU scheduler):</strong> 从就绪队列中选择一个进程分配CPU。执行频率高。</li>
</ol>
</li>
<li><strong>调度程序 (Dispatcher):</strong> 将CPU控制权交给短程调度程序选中的进程。涉及：<ul>
<li>上下文切换。</li>
<li>切换到用户模式。</li>
<li>跳转到用户程序中适当位置以重新启动程序。</li>
</ul>
</li>
<li><strong>分派延迟 (Dispatch latency):</strong> 调度程序停止一个进程并启动另一个进程运行所需的时间。</li>
</ul>
<h4 id="_1">触发调度的事件</h4>
<ol>
<li>进程从运行态 -&gt; 等待态 (如I/O请求)。</li>
<li>进程从运行态 -&gt; 就绪态 (如中断、时间片用完)。</li>
<li>进程从等待态 -&gt; 就绪态 (如I/O完成)。</li>
<li>
<p>进程终止。</p>
</li>
<li>
<p><strong>非抢占式调度 (Non-preemptive):</strong> 一旦CPU分配给进程，进程将一直持有CPU直到它自愿释放（终止或进入等待态）。情况1和4。</p>
</li>
<li><strong>抢占式调度 (Preemptive):</strong> 当前运行的进程可能被更高优先级的进程或中断打断，并被剥夺CPU。情况2和3。</li>
</ol>
<h3 id="2-scheduling-criteria">2. 调度准则 (Scheduling Criteria)</h3>
<p>用于比较CPU调度算法的性能：</p>
<ol>
<li><strong>CPU利用率 (CPU utilization):</strong> 使CPU尽可能繁忙。</li>
<li><strong>吞吐量 (Throughput):</strong> 单位时间内完成的进程数量。</li>
<li><strong>周转时间 (Turnaround time):</strong> 进程从提交到完成的总时间 (等待进入内存时间 + 就绪队列等待时间 + CPU执行时间 + I/O时间)。</li>
<li><strong>等待时间 (Waiting time):</strong> 进程在就绪队列中等待CPU的总时间。</li>
<li><strong>响应时间 (Response time):</strong> 从提交请求到产生第一个响应的时间 (对于交互式系统)。</li>
</ol>
<p><strong>优化目标:</strong></p>
<ul>
<li>最大化 CPU利用率</li>
<li>最大化 吞吐量</li>
<li>最小化 周转时间</li>
<li>最小化 等待时间</li>
<li>最小化 响应时间</li>
</ul>
<h3 id="3-scheduling-algorithms">3. 调度算法 (Scheduling Algorithms)</h3>
<h4 id="31-first-come-first-served-fcfs">3.1 先到先服务 (First-Come, First-Served - FCFS)</h4>
<ul>
<li>按进程到达就绪队列的顺序分配CPU。</li>
<li>实现简单 (FIFO队列)。</li>
<li>非抢占式。</li>
<li><strong>缺点:</strong> 平均等待时间可能很长，受进程到达顺序影响。可能出现 <strong>护航效应 (convoy effect)</strong>：短进程等待长进程释放CPU。</li>
</ul>
<h4 id="32-shortest-job-first-sjf">3.2 最短作业优先 (Shortest-Job-First - SJF)</h4>
<ul>
<li>选择具有最短下一个CPU执行时间（CPU burst）的进程。</li>
<li>可证明在平均等待时间上是最优的。</li>
<li><strong>两种形式:</strong><ol>
<li><strong>非抢占式SJF:</strong> 当前进程运行完毕后，选择就绪队列中下一个CPU执行时间最短的进程。</li>
<li><strong>抢占式SJF (Shortest-Remaining-Time-First - SRTF):</strong> 如果新到达就绪队列的进程的下一个CPU执行时间比当前运行进程的剩余执行时间还短，则抢占当前进程。</li>
</ol>
</li>
<li><strong>缺点:</strong> 难以准确预测下一个CPU执行时间的长度。<ul>
<li>常用 <strong>指数平均法 (Exponential Averaging)</strong> 预测：
    <span class="arithmatex">\(\tau_{n+1} = \alpha \cdot t_n + (1-\alpha) \cdot \tau_n\)</span>
    其中 <span class="arithmatex">\(t_n\)</span> 是第n个CPU执行的实际长度，<span class="arithmatex">\(\tau_n\)</span> 是第n个CPU执行的预测长度，<span class="arithmatex">\(\alpha\)</span> (<span class="arithmatex">\(0 \le \alpha \le 1\)</span>) 控制历史权重。</li>
</ul>
</li>
</ul>
<h4 id="33-priority-scheduling">3.3 优先级调度 (Priority Scheduling)</h4>
<ul>
<li>每个进程关联一个优先级，CPU分配给具有最高优先级的进程。</li>
<li>可以是抢占式或非抢占式。</li>
<li>SJF可以看作一种优先级调度，优先级是预测的下一个CPU执行时间的倒数。</li>
<li><strong>问题:</strong> <strong>饥饿 (Starvation)</strong> —— 低优先级进程可能永远无法执行。</li>
<li><strong>解决方案:</strong> <strong>老化 (Aging)</strong> —— 随着时间的推移逐渐增加等待进程的优先级。</li>
</ul>
<h4 id="34-round-robin-rr">3.4 轮转调度 (Round Robin - RR)</h4>
<ul>
<li>专为分时系统设计，抢占式。</li>
<li>每个进程分配一个固定的时间单位，称为 <strong>时间片 (time quantum / time slice)</strong>，通常10-100ms。</li>
<li>进程用完时间片后，被抢占并放回就绪队列尾部。</li>
<li><strong>性能:</strong><ul>
<li>时间片 <span class="arithmatex">\(q\)</span> 很大 <span class="arithmatex">\(\Rightarrow\)</span> 趋向于FCFS。</li>
<li>时间片 <span class="arithmatex">\(q\)</span> 很小 <span class="arithmatex">\(\Rightarrow\)</span> 上下文切换频繁，开销大。<span class="arithmatex">\(q\)</span> 必须远大于上下文切换时间。</li>
<li>平均周转时间通常优于FCFS，但不如SJF。响应时间较好。</li>
</ul>
</li>
</ul>
<h4 id="35-multilevel-queue-scheduling">3.5 多级队列调度 (Multilevel Queue Scheduling)</h4>
<ul>
<li>将就绪队列划分为多个独立的队列，例如：<ul>
<li>前台队列 (交互式进程) - 可能使用RR算法。</li>
<li>后台队列 (批处理进程) - 可能使用FCFS算法。</li>
</ul>
</li>
<li>队列之间必须有调度：<ul>
<li><strong>固定优先级抢占:</strong> 前台队列优先于后台队列。</li>
<li><strong>时间片划分:</strong> 每个队列获得一定的CPU时间比例。</li>
</ul>
</li>
</ul>
<h4 id="36-multilevel-feedback-queue-scheduling">3.6 多级反馈队列调度 (Multilevel Feedback Queue Scheduling)</h4>
<ul>
<li>允许进程在不同队列之间移动。</li>
<li>思想：根据进程的CPU执行特性来区分它们。<ul>
<li>CPU密集型进程会降到较低优先级队列。</li>
<li>I/O密集型和交互式进程会保持在较高优先级队列。</li>
</ul>
</li>
<li><strong>定义参数:</strong><ol>
<li>队列数量。</li>
<li>每个队列的调度算法。</li>
<li>进程升级到更高优先级队列的方法。</li>
<li>进程降级到更低优先级队列的方法。</li>
<li>新进程进入哪个队列的方法。</li>
</ol>
</li>
<li>是最通用但也最复杂的调度算法，可以通过配置适应特定系统。可以实现老化。</li>
</ul>
<h3 id="4-thread-scheduling">4. 线程调度 (Thread Scheduling)</h3>
<ul>
<li>如果操作系统支持线程，调度的是内核级线程。</li>
<li><strong>用户级线程</strong>由线程库在映射到的LWP (轻量级进程) 上调度。<ul>
<li><strong>进程竞争范围 (Process Contention Scope - PCS):</strong> 调度竞争在同一进程内的线程之间。</li>
</ul>
</li>
<li><strong>内核级线程</strong>由操作系统调度。<ul>
<li><strong>系统竞争范围 (System Contention Scope - SCS):</strong> 调度竞争在系统中所有线程之间。</li>
</ul>
</li>
<li>Pthreads API允许指定PCS或SCS：<ul>
<li><code>PTHREAD_SCOPE_PROCESS</code> (PCS)</li>
<li><code>PTHREAD_SCOPE_SYSTEM</code> (SCS) (Linux, macOS只支持这个)</li>
</ul>
</li>
</ul>
<h3 id="5-multiprocessor-scheduling">5. 多处理器调度 (Multiprocessor Scheduling)</h3>
<ul>
<li>涉及在多个CPU上分配工作。</li>
<li><strong>非对称多处理 (Asymmetric Multiprocessing):</strong> 一个主处理器处理所有调度决策、I/O等，其他处理器执行用户代码。</li>
<li><strong>对称多处理 (Symmetric Multiprocessing - SMP):</strong> 每个处理器都是自调度的。<ul>
<li>所有进程可能在公共就绪队列中。</li>
<li>每个处理器可能有自己的私有就绪队列。</li>
</ul>
</li>
<li><strong>处理器亲和性 (Processor Affinity):</strong> 进程倾向于在同一个处理器上运行，以利用缓存。<ul>
<li><strong>软亲和性 (Soft affinity):</strong> OS试图保持进程在同一处理器，但不保证。</li>
<li><strong>硬亲和性 (Hard affinity):</strong> 进程可以指定它只能在某个处理器子集上运行。</li>
</ul>
</li>
<li><strong>负载均衡 (Load Balancing):</strong> 保持所有处理器的工作负载均匀。<ul>
<li><strong>推迁移 (Push migration):</strong> 周期性任务检查负载，并将任务从过载处理器推到空闲处理器。</li>
<li><strong>拉迁移 (Pull migration):</strong> 空闲处理器从繁忙处理器拉取等待任务。</li>
</ul>
</li>
<li><strong>多核处理器 (Multicore Processors):</strong> 同一物理芯片上的多个处理器核心。</li>
<li><strong>芯片多线程 (Chip Multithreading - CMT) / 超线程 (Hyper-threading):</strong> 每个核心支持多个硬件线程。OS看到更多逻辑处理器。<ul>
<li><strong>细粒度多线程:</strong> 在指令周期级切换线程。</li>
<li><strong>粗粒度多线程:</strong> 仅在长延迟事件（如内存停顿）时切换线程。</li>
</ul>
</li>
</ul>
<h3 id="6-cpu-real-time-cpu-scheduling">6. 实时CPU调度 (Real-Time CPU Scheduling)</h3>
<ul>
<li>系统的正确性不仅取决于计算的逻辑结果，还取决于结果产生的时间。</li>
<li><strong>软实时系统 (Soft real-time systems):</strong> 关键实时任务获得优先权，但不保证按时完成。</li>
<li><strong>硬实时系统 (Hard real-time systems):</strong> 任务必须在截止期限 (deadline) 前完成。</li>
<li><strong>延迟最小化:</strong><ul>
<li><strong>事件延迟 (Event latency):</strong> 从事件发生到服务该事件的时间。</li>
<li><strong>中断延迟 (Interrupt latency):</strong> 从CPU收到中断到中断处理例程开始的时间。</li>
<li><strong>分派延迟 (Dispatch latency):</strong> 停止一个进程并启动另一个进程所需的时间。</li>
</ul>
</li>
<li><strong>基于优先级的调度</strong>是基础。抢占式。</li>
<li><strong>周期性进程</strong>特征：处理时间 <span class="arithmatex">\(t\)</span>，截止日期 <span class="arithmatex">\(d\)</span>，周期 <span class="arithmatex">\(p\)</span>。 (<span class="arithmatex">\(0 \le t \le d \le p\)</span>)。</li>
<li><strong>准入控制 (Admission control):</strong> 如果不能保证任务按时完成，则拒绝该任务。</li>
</ul>
<h4 id="_2">实时调度算法</h4>
<ol>
<li><strong>速率单调调度 (Rate-Monotonic Scheduling - RMS):</strong><ul>
<li>静态优先级策略。优先级根据周期的倒数分配（周期越短，优先级越高）。</li>
<li>抢占式。</li>
<li>最优的静态优先级算法。</li>
<li>CPU利用率有上限：<span class="arithmatex">\(U = n(2^{1/n} - 1)\)</span>，其中 <span class="arithmatex">\(n\)</span> 是进程数。对于 <span class="arithmatex">\(n \to \infty\)</span>, <span class="arithmatex">\(U \approx \ln 2 \approx 0.69\)</span>。</li>
</ul>
</li>
<li><strong>最早截止期限优先调度 (Earliest-Deadline-First - EDF):</strong><ul>
<li>动态优先级策略。截止期限越早，优先级越高。</li>
<li>抢占式。</li>
<li>理论上最优，可以达到100%的CPU利用率（如果总利用率 <span class="arithmatex">\(\le 1\)</span>）。</li>
</ul>
</li>
<li><strong>比例分享调度 (Proportional Share Scheduling):</strong><ul>
<li>在所有进程之间分配 <span class="arithmatex">\(T\)</span> 份处理器时间份额。一个应用获得 <span class="arithmatex">\(N\)</span> 份，则它得到 <span class="arithmatex">\(N/T\)</span> 的处理器时间。</li>
</ul>
</li>
<li><strong>优先级反转 (Priority Inversion):</strong> 低优先级进程持有高优先级进程所需资源，导致高优先级进程等待低优先级进程。<ul>
<li><strong>优先级继承协议 (Priority Inheritance Protocol):</strong> 低优先级进程临时继承等待它的高优先级进程的优先级。</li>
</ul>
</li>
</ol>
<h3 id="7-operating-system-examples">7. 操作系统示例 (Operating System Examples)</h3>
<h4 id="71-linux">7.1 Linux调度</h4>
<ul>
<li>早期版本使用类似UNIX的调度算法。</li>
<li>内核2.5后引入 O(1) 调度器。</li>
<li>内核2.6.23后引入 <strong>完全公平调度程序 (Completely Fair Scheduler - CFS)</strong> 作为默认调度器。<ul>
<li>针对普通（非实时）进程。</li>
<li>不直接分配时间片，而是分配CPU时间的比例。</li>
<li>每个任务维护一个 <strong>虚拟运行时间 (vruntime)</strong>。调度器选择 <code>vruntime</code> 最小的任务运行。</li>
<li><code>vruntime</code> 根据任务的nice值（优先级）进行调整。nice值越低（优先级越高），<code>vruntime</code> 增长越慢。</li>
<li><strong>目标延迟 (Target latency):</strong> 保证每个任务在一段时间内至少运行一次。</li>
</ul>
</li>
<li>实时任务使用SCHED_FIFO (FCFS) 和 SCHED_RR (轮转) 调度策略，优先级高于普通任务。</li>
</ul>
<h4 id="72-windows">7.2 Windows调度</h4>
<ul>
<li>基于优先级的抢占式调度。</li>
<li>32级优先级方案。<ul>
<li>可变优先级类 (1-15)。</li>
<li>实时优先级类 (16-31)。</li>
<li>优先级0用于内存管理线程。</li>
</ul>
</li>
<li>调度器 (dispatcher) 选择最高优先级的可运行线程。</li>
<li>线程用完时间片后，优先级可能会降低（但不会低于基准优先级）。</li>
<li>等待I/O的线程完成后，其优先级可能会临时提升 (priority boost)。</li>
<li>用户模式调度 (User-Mode Scheduling - UMS) 允许应用程序创建和管理自己的线程，独立于内核。</li>
</ul>
<h4 id="73-solaris">7.3 Solaris调度</h4>
<ul>
<li>基于优先级的调度。</li>
<li>多个调度类：<ol>
<li>分时 (TS - Timesharing): 默认，多级反馈队列。</li>
<li>交互式 (IA - Interactive): 类似TS，但对窗口活动进程有优先级提升。</li>
<li>实时 (RT - Real-Time): 固定优先级，抢占式。</li>
<li>系统 (SYS): 内核线程。</li>
<li>公平份额 (FSS - Fair Share): 按CPU份额分配。</li>
<li>固定优先级 (FP - Fixed Priority): 类似RT。</li>
</ol>
</li>
<li>调度器将类特定优先级转换为全局优先级，选择全局优先级最高的线程运行。</li>
</ul>
<h3 id="8-algorithm-evaluation">8. 算法评估 (Algorithm Evaluation)</h3>
<ol>
<li><strong>确定性建模 (Deterministic Modeling):</strong><ul>
<li>给定特定的预定工作负载，计算每个算法的性能。</li>
<li>简单快速，但结果只对该特定负载有效。</li>
</ul>
</li>
<li><strong>排队模型 (Queueing Models):</strong><ul>
<li>使用概率分布描述进程到达和CPU/I/O执行。</li>
<li>计算平均吞吐量、利用率、等待时间等。</li>
<li><strong>Little's Law:</strong> <span class="arithmatex">\(L = \lambda \times W\)</span><ul>
<li><span class="arithmatex">\(L\)</span>: 队列中的平均进程数。</li>
<li><span class="arithmatex">\(\lambda\)</span>: 平均到达率。</li>
<li><span class="arithmatex">\(W\)</span>: 队列中的平均等待时间。</li>
</ul>
</li>
</ul>
</li>
<li><strong>仿真 (Simulations):</strong><ul>
<li>编写程序模拟操作系统行为。</li>
<li>使用随机数生成器或跟踪磁带 (trace tapes) 生成事件。</li>
<li>更灵活和准确，但设计和实现复杂。</li>
</ul>
</li>
<li><strong>实现 (Implementation):</strong><ul>
<li>在真实系统中实现并测试调度算法。</li>
<li>最准确，但成本高、风险大。</li>
</ul>
</li>
</ol>
<hr />
<div class="admonition success">
<p class="admonition-title">总结</p>
<p>理解进程和线程是掌握操作系统的基石。CPU调度算法的选择直接影响系统性能和用户体验。不同的系统和应用场景需要不同的调度策略。</p>
</div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="2025年6月14日 20:15:26 CST">2025年6月14日</span>
  </span>

    
    
    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        这个页面对您有帮助吗?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="有帮助" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="仍需改进" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              感谢您的反馈!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              感谢您的反馈! 可以联系作者以提供更多改进建议。
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


  <h2 id="__comments">评论</h2>
  <!-- Insert generated snippet here -->
<script src="https://giscus.app/client.js"
        data-repo="allenge008/Discussions"
        data-repo-id="R_kgDOOsnx4A"
        data-category="Announcements"
        data-category-id="DIC_kwDOOsnx4M4CqVVF"
        data-mapping="pathname"
        data-strict="1"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>
  <!-- Synchronize Giscus theme with palette -->
  <script>
    var giscus = document.querySelector("script[src*=giscus]")

    // Set palette on initial load
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate"
        ? "transparent_dark"
        : "light"

      // Instruct Giscus to set theme
      giscus.setAttribute("data-theme", theme) 
    }

    // Register event handlers after documented loaded
    document.addEventListener("DOMContentLoaded", function() {
      var ref = document.querySelector("[data-md-component=palette]")
      ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
          var theme = palette.color.scheme === "slate"
            ? "transparent_dark"
            : "light"

          // Instruct Giscus to change theme
          var frame = document.querySelector(".giscus-frame")
          frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
          )
        }
      })
    })
  </script>

                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="../chapter1/" class="md-footer__link md-footer__link--prev" aria-label="上一页: 操作系统概述">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                操作系统概述
              </div>
            </div>
          </a>
        
        
          
          <a href="../chapter3/" class="md-footer__link md-footer__link--next" aria-label="下一页: 进程同步与死锁">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                进程同步与死锁
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Allenge007
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/allenge007" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "navigation.expand", "navigation.indexes", "content.tabs.link", "content.tooltips", "content.code.copy", "content.action.edit", "content.action.view", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../javascripts/katex.js"></script>
      
        <script src="../../../javascripts/font-adjuster.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
      
        <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>